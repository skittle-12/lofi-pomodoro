<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pixel Focus Player</title>
<style>
  body {
    margin: 0;
    background: #0f172a;
    font-family: "Press Start 2P", monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  /* Container */
  .pixel-box {
    width: 330px;
    height: 420px;
    background: url("") no-repeat center/cover;
    border: 4px solid #3b2f2f;
    image-rendering: pixelated;
    border-radius: 8px;
    position: relative;
    padding-top: 60px;
  }

  /* Tabs */
  .tabs {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    background: #2d2424;
    border-bottom: 4px solid #3b2f2f;
  }

  .tab {
    flex: 1;
    padding: 10px 0;
    text-align: center;
    font-size: 12px;
    cursor: pointer;
    color: #cfc6b8;
    border-right: 3px solid #3b2f2f;
  }

  .tab.active {
    background: #4a3a3a;
    color: #fff;
  }

  /* Timer text */
  .timer {
    margin-top: 140px;
    text-align: center;
    font-size: 22px;
    color: #ffffff;
    text-shadow: 0 0 4px #000;
  }

  /* Audio controls */
  .controls {
    position: absolute;
    bottom: 20px;
    width: 100%;
    text-align: center;
  }

  .btn {
    padding: 8px 16px;
    background: #4a3a3a;
    border: 3px solid #2d2424;
    color: #fff;
    cursor: pointer;
    font-size: 12px;
    border-radius: 4px;
  }

  .seek {
    width: 80%;
    margin-top: 10px;
  }

  iframe {
    display: none;
  }
</style>
</head>
<body>

<div class="pixel-box">

  <!-- Tabs -->
  <div class="tabs">
    <div class="tab active" id="focusTab">FOCUS</div>
    <div class="tab" id="breakTab">BREAK</div>
  </div>

  <!-- Timer -->
  <div class="timer" id="timerDisplay">30:00</div>

  <!-- Controls -->
  <div class="controls">
    <button class="btn" id="playPause">Play</button>
    <br>
    <input type="range" id="seek" class="seek" min="0" max="100" value="0">
  </div>

</div>

<!-- Hidden YouTube Player -->
<div id="yt"></div>

<script>
  /* TIMER LOGIC */
  let focusTime = 30 * 60;
  let breakTime = 10 * 60;
  let currentTime = focusTime;
  let isFocus = true;

  const timerDisplay = document.getElementById("timerDisplay");
  const focusTab = document.getElementById("focusTab");
  const breakTab = document.getElementById("breakTab");

  function updateTimerText() {
    const m = String(Math.floor(currentTime / 60)).padStart(2, "0");
    const s = String(currentTime % 60).padStart(2, "0");
    timerDisplay.textContent = `${m}:${s}`;
  }

  focusTab.onclick = () => {
    isFocus = true;
    currentTime = focusTime;
    focusTab.classList.add("active");
    breakTab.classList.remove("active");
    updateTimerText();
  };

  breakTab.onclick = () => {
    isFocus = false;
    currentTime = breakTime;
    breakTab.classList.add("active");
    focusTab.classList.remove("active");
    updateTimerText();
  };

  updateTimerText();

  /* YOUTUBE AUDIO PLAYER */
  let player;
  let isPlaying = false;

  const seekBar = document.getElementById("seek");
  const playPauseBtn = document.getElementById("playPause");

  const tag = document.createElement("script");
  tag.src = "https://www.youtube.com/iframe_api";
  document.body.appendChild(tag);

  const VIDEO_ID = "NJuSStkIZBg";

  function onYouTubeIframeAPIReady() {
    player = new YT.Player("yt", {
      height: "0",
      width: "0",
      videoId: VIDEO_ID,
      playerVars: { autoplay: 0, controls: 0 },
      events: {
        onReady: () => {
          seekBar.max = player.getDuration();
          updateSeek();
        },
        onStateChange: (e) => {
          if (e.data === YT.PlayerState.PLAYING) {
            isPlaying = true;
            playPauseBtn.textContent = "Pause";
          } else {
            isPlaying = false;
            playPauseBtn.textContent = "Play";
          }
        }
      }
    });
  }

  playPauseBtn.onclick = () => {
    if (isPlaying) player.pauseVideo();
    else player.playVideo();
  };

  seekBar.oninput = () => {
    player.seekTo(seekBar.value, true);
  };

  function updateSeek() {
    if (player && player.getCurrentTime) {
      seekBar.value = player.getCurrentTime();
    }
    requestAnimationFrame(updateSeek);
  }
</script>

</body>
</html>
